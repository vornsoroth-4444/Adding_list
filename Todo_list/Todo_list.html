<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<style>
    *{
        margin: 0 ;
        padding: 0;
        box-sizing: border-box;
    }
    body{
        font-family: sans-serif;
        background-color: black;
    }
    .container{
        margin: 10rem auto;
        width: 500px;
        background: rgb(51, 51, 51);
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        gap: 1rem;
        padding: 1.5rem;
        border-radius: 20px;
        overflow: hidden;
        border: 3px solid rgb(61, 61, 61);;
    }
    form{
        display: flex;
        justify-content: space-between;
        border-radius: 10px;
        overflow: hidden;
    }
    form input{
        flex-grow: 1;
        padding: 1rem;
        cursor: pointer;
        border: none;
        outline: none;
        font-size: 1.1rem;
        background-color: rgb(84, 84, 84);
        color: gold;
        font-weight: bold;
    }
       .add{
        letter-spacing: 3px;
        background: rgb(123, 119, 119);
        padding: 0 2rem;
        border: none;
        outline: none;
        cursor: pointer;
        font-size: 1.3rem;
        color: rgb(228, 196, 15);
        font-weight: bold ;
    }
    .clear{
        padding: 1rem;
        font-size: 1.3rem;
        letter-spacing: 3px;
        background-color: rgb(122, 105, 5);
        border-radius: 20px;
        border: none;
        outline: none;
        cursor: pointer;
        color: white;
        font-weight: bold;
    }
    .list-container{
       display: flex;
       flex-direction: column-reverse;
        gap: 1rem;
        margin: 1.5rem 0 2rem 0;
        padding: 0 0.5rem;
    }
    li{
        list-style-type: none;
        font-size: 1.3rem;
        display: flex;
        gap: 0.5rem;
        color: #ffff;
        justify-content: space-between;
        user-select: none;
        padding-bottom: 0.7rem;
        border-bottom: 1px solid gray ;
    }
    li.completed{
        opacity: 0.5;
        font-style: italic;
    }
    li.completed i{
        color: gray;
    }
    li i{
        color: gold;
    }
    .count-task{
        font-size: 1.2rem;
        color: #ffff;
        font-weight: bold;
    }
</style>
<body>
    <div class="container">
        <form >
            <input class="input" type="text" placeholder="Add new task...">
             <button class="add"> Add </button>
        </form>
        <!-- <ul class="list-container">
            <li>Item One<i class="fa-solid fa-circle-xmark"></i></li>
             <li>Item One<i class="fa-solid fa-circle-xmark"></i></li>
              <li>Item One<i class="fa-solid fa-circle-xmark"></i></li>
        </ul> -->
        <p class="count-task">item counts</p>
        <button onclick="clearAllTask()" class="clear">Clear</button>

        
    </div>
    <script>
        const container = document.querySelector(".container");
        const countTask = document.querySelector(".count-task");

        document.addEventListener("DOMContentLoaded",function(){
            const addBtn = document.querySelector(".add");
            const ul = document.createElement("ul");    
            ul.className = "list-container";
            container.insertBefore(ul,countTask);
            addBtn.addEventListener("click",addTask);
            ul.addEventListener("click",handleTask);
            console.dir(ul);
             showTaskCount();
             displayData();
        });
        function addTask(event){
            event.preventDefault();
            const ul = document.querySelector(".list-container");
            const  input = document.querySelector(".input");
            const newTask = input.value.trim();   //trim kir cut nv dork k'lea auto
            if(!newTask){
                alert("Add Task!");
            }else{
                const li = document.createElement("li");
                li.innerHTML = `${input.value}<i class="fa-solid fa-circle-xmark"></i>`;
                ul.appendChild(li);
            }
           input.value = "";
            showTaskCount();
            handleData();
       }
       function handleTask(event){  
           if(event.target.tagName === "I"){
            event.target.parentElement.remove();
             showTaskCount();
             handleData();
           }
           if(event.target.tagName === "LI"){
            event.target.classList.toggle("completed");
            handleData();
           }
       }

       function clearAllTask (){
        const ul = document.querySelector(".list-container");
        ul.innerHTML = "";
         showTaskCount();
         handleData();
       }
       function showTaskCount(){
        const taskCount = document.querySelector(".list-container").childElementCount;
        countTask.textContent = `There ${taskCount>1? "are": "is"} ${taskCount > 0 ? taskCount : "no such"} task${taskCount>1? "s": ""}.`;
        
       }
       

       //store data in localstorage
       function handleData(){
        const ul = document.querySelector(".list-container");
        localStorage.setItem("data",ul.innerHTML);
       }

       function displayData(){
        const ul = document.querySelector(".list-container");
        ul.innerHTML = localStorage.getItem("data");
       }
    </script>
</body>
</html>